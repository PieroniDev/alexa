<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Neural Monitor ES5</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Outfit:wght@300;600;800&display=swap');

        :root {
            --bg-dark: #050505;
            --glass: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --neon-blue: #00f3ff;
            --neon-purple: #bc13fe;
            --neon-green: #0aff68;
            --text-main: #ffffff;
            --text-muted: #8b9bb4;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; user-select: none; -webkit-tap-highlight-color: transparent; }

        body {
            width: 100vw;
            height: 100vh;
            background-color: var(--bg-dark);
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(188, 19, 254, 0.15) 0%, transparent 40%),
                radial-gradient(circle at 90% 80%, rgba(0, 243, 255, 0.1) 0%, transparent 40%);
            color: var(--text-main);
            font-family: 'Outfit', sans-serif;
            overflow: hidden;
            display: grid;
            grid-template-columns: 280px 1fr 260px;
            gap: 16px;
            padding: 20px;
        }

        /* === COLUNA 1 === */
        .col-left { display: flex; flex-direction: column; justify-content: space-between; }
        .greeting-box { animation: fadeIn 1s ease; }
        .greeting-sub { font-size: 1.1rem; color: var(--neon-blue); text-transform: uppercase; letter-spacing: 2px; font-weight: 800; }
        .greeting-main { font-size: 2.5rem; font-weight: 300; line-height: 1.1; margin-top: 5px; }

        .clock-huge {
            font-family: 'JetBrains Mono', monospace;
            font-size: 4.5rem;
            font-weight: 700;
            letter-spacing: -3px;
            background: linear-gradient(to bottom, #fff, #aaa);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            line-height: 1;
        }
        .date-box { font-size: 1.2rem; color: var(--text-muted); margin-top: 5px; }

        /* === COLUNA 2 === */
        .col-center { 
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            backdrop-filter: blur(10px);
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .weather-display { text-align: center; }
        .weather-icon { font-size: 4rem; margin-bottom: 10px; display: block; filter: drop-shadow(0 0 10px rgba(255,255,255,0.3)); }
        .weather-temp { font-size: 3.5rem; font-weight: 800; }
        .weather-desc { font-size: 1.2rem; text-transform: capitalize; color: var(--text-muted); }

        .pomodoro-container { display: none; text-align: center; width: 100%; }
        .timer-display { font-family: 'JetBrains Mono', monospace; font-size: 5rem; font-weight: 700; color: var(--neon-green); text-shadow: 0 0 20px rgba(10, 255, 104, 0.3); }
        .timer-controls { display: flex; gap: 15px; justify-content: center; margin-top: 20px; }
        
        .btn-pomo {
            padding: 12px 24px;
            border-radius: 12px;
            border: none;
            font-weight: 600;
            font-size: 1.1rem;
            cursor: pointer;
            transition: transform 0.2s;
        }
        .btn-start { background: var(--neon-green); color: #000; }
        .btn-reset { background: rgba(255,255,255,0.1); color: #fff; border: 1px solid rgba(255,255,255,0.2); }
        .btn-pomo:active { transform: scale(0.95); }

        /* === COLUNA 3 === */
        .col-right { display: flex; flex-direction: column; gap: 12px; }

        .action-card {
            flex: 1;
            background: rgba(255,255,255,0.03);
            border: 1px solid var(--glass-border);
            border-radius: 18px;
            display: flex;
            align-items: center;
            justify-content: flex-start;
            padding: 0 15px;
            gap: 12px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .action-card:active { background: rgba(255,255,255,0.1); transform: scale(0.98); }
        .action-card.active-state { background: rgba(0, 243, 255, 0.15); border-color: var(--neon-blue); }

        .card-icon { font-size: 1.5rem; }
        .card-label { font-size: 0.95rem; font-weight: 600; }
        .card-sub { font-size: 0.75rem; color: var(--text-muted); }

        #flashlight-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: white; z-index: 9999; display: none;
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        /* Video invis√≠vel */
        #keep-awake-video { position: absolute; width: 1px; height: 1px; opacity: 0.001; pointer-events: none; top: -100px;}
    </style>
</head>
<body>

    <video id="keep-awake-video" playsinline loop muted>
        <source src="data:video/mp4;base64,AAAAIGZ0eXBpc29tAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAAACVtZGF0AAACtgAAAA1hdmNDAWQAC///AAAAC2J0cnQAAAAAAEA AAAhzdHRzAAAAAAAAAAEAAAAeAAABAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAHgAAAAEAAAAUc3RzegAAAAAAAAAeAAAAAQAAAAxzdGNvAAAAAAAAAAEAAAAvAAAAQm1vb3YAAABsbXZoZAAAAADY629w2OtvcAAAA+gAAAAAAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAABwdHJhawAAAFx0a2hkAAAAAdjrb3DY629wAAAAAQAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAG1kaWEAAAAgbWRoZAAAAADY629w2OtvcAAAA+gAAAAAVcAAAAAAACBoZGxyAAAAAAAAAAB2aWRlAAAAAAAAAAAAAAAAVmlkZW8AAAAAAQBtaW5mAAAAFHZtaGQAAAAAAAQAAAAAAQAAAAIkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAAEcc3RibAAAALhzdHNkAAAAAAAAAAEAAACobXA0dgAAAAAAAAABAAAAAQAAAAEADEAAAAAAAAAAAAAA2AEQAtoAAAAAAAYx//8AAAAqYXZjQwFkAAr/jMAr8PfN/8AAAAMAEAAAAwQA8YU5gwAAAwABAAADAEAAADxib3J0AAAAAQAIAAAAZ2JsbQAAAAEACAAAAAhidHJ0AAAAAAAQAAAAIHN0dHMAAAAAAAAAAQAAAA4AAAABAAAAFHN0c3oAAAAAAAAADgAAAAEAAAAcc3RzYwAAAAAAAAABAAAAAQAAAA4AAAABAAAAFHN0Y28AAAAAAAAAAQAAADIAAAAYdWR0YQAAABBtZXRhAAAAAAAAACFoZGxyAAAAAAAAAABtZGlyAAAAAAAAAAAAAAAAAAAAAA==" type="video/mp4">
    </video>

    <div id="flashlight-overlay"></div>

    <div class="col-left">
        <div class="greeting-box">
            <div class="greeting-sub" id="greeting-time">BOM DIA</div>
            <div class="greeting-main">Alexa<br>Monitor</div>
        </div>
        <div>
            <div class="clock-huge" id="clock">00:00</div>
            <div class="date-box" id="date">Segunda, 01 Jan</div>
        </div>
    </div>

    <div class="col-center" id="main-display">
        <div class="weather-display" id="view-weather">
            <span class="weather-icon" id="w-icon">‚òÅÔ∏è</span>
            <div class="weather-temp" id="w-temp">--¬∞</div>
            <div class="weather-desc" id="w-desc">Carregando...</div>
            <div style="margin-top:15px; font-size: 0.9rem; opacity: 0.6;" id="w-loc">Formiga, MG</div>
        </div>

        <div class="pomodoro-container" id="view-pomodoro">
            <div style="margin-bottom: 10px; opacity: 0.7; letter-spacing: 2px;">FOCO TOTAL</div>
            <div class="timer-display" id="pomo-timer">25:00</div>
            <div class="timer-controls">
                <button class="btn-pomo btn-start" id="btn-start-pomo">Iniciar</button>
                <button class="btn-pomo btn-reset" id="btn-reset-pomo">Reset</button>
            </div>
        </div>
    </div>

    <div class="col-right">
        <div class="action-card" onclick="toggleFullScreen()">
            <div class="card-icon">‚õ∂</div>
            <div>
                <div class="card-label">Tela Cheia</div>
                <div class="card-sub">Ocultar Barra</div>
            </div>
        </div>

        <div class="action-card" id="card-focus" onclick="toggleMode('focus')">
            <div class="card-icon">‚è±Ô∏è</div>
            <div>
                <div class="card-label">Modo Foco</div>
                <div class="card-sub">Timer 25min</div>
            </div>
        </div>

        <div class="action-card" onclick="toggleFlashlight()">
            <div class="card-icon">üí°</div>
            <div>
                <div class="card-label">Lanterna</div>
                <div class="card-sub">Luz Branca</div>
            </div>
        </div>

        <div class="action-card" onclick="window.location.reload()">
            <div class="card-icon">üîÑ</div>
            <div>
                <div class="card-label">Atualizar</div>
                <div class="card-sub">Recarregar</div>
            </div>
        </div>
    </div>

    <script>
        const CONFIG = {
            city: "Formiga,BR",
            openWeatherKey: "" 
        };

        /* === CORRE√á√ÉO DE √ÅUDIO & KEEP AWAKE === */
        const video = document.getElementById('keep-awake-video');
        
        // Fun√ß√£o para garantir que o v√≠deo rode sem som
        function ensureSilentPlayback() {
            video.volume = 0.0; // For√ßa zero absoluto
            video.muted = true;
            if(video.paused) {
                video.play().catch(e => console.log("Aguardando intera√ß√£o para play"));
            }
        }
        
        // Tenta iniciar no carregamento
        ensureSilentPlayback();
        
        // Refor√ßa a cada toque na tela (para garantir que o browser n√£o pause)
        document.body.addEventListener('touchstart', ensureSilentPlayback, {passive: true});
        document.body.addEventListener('click', ensureSilentPlayback);


        /* === FULLSCREEN === */
        function toggleFullScreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen().catch(err => {
                    alert("Para tela cheia, tente rolar a p√°gina para baixo.");
                });
            } else {
                if (document.exitFullscreen) document.exitFullscreen();
            }
        }

        /* === RESTO DAS FUN√á√ïES (IGUAL ANTERIOR) === */
        function updateTime() {
            const now = new Date();
            const hours = now.getHours();
            const minutes = String(now.getMinutes()).padStart(2, '0');
            document.getElementById('clock').innerText = `${String(hours).padStart(2,'0')}:${minutes}`;
            const options = { weekday: 'long', day: 'numeric', month: 'short' };
            document.getElementById('date').innerText = now.toLocaleDateString('pt-BR', options);
            
            let greet = "BOA NOITE";
            if(hours >= 5 && hours < 12) greet = "BOM DIA";
            else if(hours >= 12 && hours < 18) greet = "BOA TARDE";
            document.getElementById('greeting-time').innerText = greet;
        }
        setInterval(updateTime, 1000);
        updateTime();

        async function fetchWeather() {
            if(!CONFIG.openWeatherKey) {
                document.getElementById('w-temp').innerText = "24¬∞";
                document.getElementById('w-desc').innerText = "Simulado";
                return;
            }
            try {
                const url = `https://api.openweathermap.org/data/2.5/weather?q=${CONFIG.city}&appid=${CONFIG.openWeatherKey}&units=metric&lang=pt_br`;
                const res = await fetch(url);
                const data = await res.json();
                document.getElementById('w-temp').innerText = Math.round(data.main.temp) + "¬∞";
                document.getElementById('w-desc').innerText = data.weather[0].description;
                document.getElementById('w-loc').innerText = data.name;
                
                const id = data.weather[0].id;
                let icon = "‚òÅÔ∏è";
                if(id === 800) icon = "‚òÄÔ∏è";
                else if(id >= 200 && id < 300) icon = "‚õàÔ∏è";
                else if(id >= 300 && id < 600) icon = "üåßÔ∏è";
                else if(id >= 600 && id < 700) icon = "‚ùÑÔ∏è";
                document.getElementById('w-icon').innerText = icon;
            } catch(e) { console.log("Erro clima", e); }
        }
        fetchWeather();
        setInterval(fetchWeather, 600000);

        let currentMode = 'weather';
        let pomodoroInterval;
        let timeLeft = 25 * 60;
        let isRunning = false;

        function toggleMode(mode) {
            const weatherDiv = document.getElementById('view-weather');
            const pomoDiv = document.getElementById('view-pomodoro');
            const focusCard = document.getElementById('card-focus');

            if (currentMode === 'weather') {
                weatherDiv.style.display = 'none';
                pomoDiv.style.display = 'block';
                focusCard.classList.add('active-state');
                currentMode = 'pomodoro';
            } else {
                weatherDiv.style.display = 'block';
                pomoDiv.style.display = 'none';
                focusCard.classList.remove('active-state');
                currentMode = 'weather';
            }
        }

        const timerDisplay = document.getElementById('pomo-timer');
        function updateTimerDisplay() {
            const m = Math.floor(timeLeft / 60);
            const s = timeLeft % 60;
            timerDisplay.innerText = `${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
        }

        document.getElementById('btn-start-pomo').addEventListener('click', function() {
            if(isRunning) {
                clearInterval(pomodoroInterval);
                this.innerText = "Retomar";
                this.style.background = "var(--neon-blue)";
                isRunning = false;
            } else {
                this.innerText = "Pausar";
                this.style.background = "#ff4757"; 
                isRunning = true;
                pomodoroInterval = setInterval(() => {
                    if(timeLeft > 0) {
                        timeLeft--;
                        updateTimerDisplay();
                    } else {
                        clearInterval(pomodoroInterval);
                        isRunning = false;
                        timerDisplay.style.color = "var(--neon-purple)";
                        alert("Tempo esgotado!");
                    }
                }, 1000);
            }
        });

        document.getElementById('btn-reset-pomo').addEventListener('click', () => {
            clearInterval(pomodoroInterval);
            timeLeft = 25 * 60;
            isRunning = false;
            updateTimerDisplay();
            document.getElementById('btn-start-pomo').innerText = "Iniciar";
            document.getElementById('btn-start-pomo').style.background = "var(--neon-green)";
            timerDisplay.style.color = "var(--neon-green)";
        });

        function toggleFlashlight() {
            const overlay = document.getElementById('flashlight-overlay');
            overlay.style.display = (overlay.style.display === 'block') ? 'none' : 'block';
        }
        document.getElementById('flashlight-overlay').addEventListener('click', toggleFlashlight);

    </script>
</body>
</html>